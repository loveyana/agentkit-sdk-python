# 常见问题

本节列举了使用 AgentKit SDK 时的常见问题和解决方案。

## 安装问题

### 问题：pip 安装失败

**现象**：执行 `pip install` 时报错连接超时或包找不到。

**解决方案**：
1. 确认网络连接正常
2. 使用内部源安装：
   ```bash
   pip install --pre -U agentkit-sdk-python --index-url https://artifacts-cn-beijing.volces.com/repository/agentkit/simple/ --extra-index-url https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple --trusted-host mirrors.tuna.tsinghua.edu.cn
   ```
3. 检查 Python 版本是否为 3.12+

### 问题：CLI 命令不可用

**现象**：执行 `agentkit` 命令时提示 `command not found`。

**解决方案**：
1. 确认安装成功：`pip list | grep agentkit`
2. 检查 PATH 环境变量是否包含 pip 的 bin 目录
3. 尝试重新安装：`pip install -U agentkit-sdk-python-inhouse-nightly`

## 配置问题

### 问题：环境变量未生效

**现象**：提示无法连接到 AgentKit Platform 或认证失败。

**解决方案**：
1. 确认已设置必需的环境变量：
   ```bash
   echo $VOLCENGINE_ACCESS_KEY
   echo $VOLCENGINE_SECRET_KEY
   ```
2. 确保没有多余的空格或引号
3. 在当前 shell 会话中重新 export 环境变量

### 问题：配置文件格式错误

**现象**：执行 `agentkit launch` 时提示配置文件解析失败。

**解决方案**：
1. 检查 `agentkit.yaml` 格式是否正确（注意缩进）
2. 重新运行 `agentkit config` 生成配置
3. 参考快速开始文档中的配置示例

## 部署问题

### 问题：CR 创建失败

**现象**：
```
CreateRegistry: QuotaExceeded.Registry The quota of Registry is exceeded.
```

**解决方案**：
1. CR 实例数量超出配额限制
2. 在 `agentkit config` 中配置为已有的 CR 实例名称
3. 或联系管理员提高配额

### 问题：镜像构建失败

**现象**：Pipeline 构建失败，提示依赖安装错误。

**解决方案**：
1. 检查 `requirements.txt` 中的依赖是否正确
2. 确认依赖版本是否兼容 Python 3.12
3. 查看 Pipeline 日志获取详细错误信息

### 问题：Runtime 部署超时

**现象**：Runtime 长时间处于 `Releasing` 状态。

**解决方案**：
1. 首次部署通常需要 2-3 分钟，请耐心等待
2. 使用 `agentkit status` 检查状态
3. 如果超过 5 分钟仍未就绪，可能是资源不足，尝试 `agentkit destroy` 后重新部署

### 问题：Runtime 状态异常

**现象**：Runtime 状态为 `Failed` 或 `Error`。

**解决方案**：
1. 检查环境变量配置是否正确（特别是模型 API Key）
2. 查看 AgentKit Platform 控制台的日志
3. 确认应用代码没有启动时错误
4. 尝试使用 `agentkit destroy` 清理后重新部署

## 调用问题

### 问题：invoke 调用失败

**现象**：执行 `agentkit invoke` 时提示连接失败或超时。

**解决方案**：
1. 使用 `agentkit status` 确认 Runtime 状态为 `Ready`
2. 检查网络连接
3. 确认 Endpoint 地址正确
4. 检查防火墙或代理设置

### 问题：模型调用失败

**现象**：Agent 返回错误，提示模型访问失败。

**解决方案**：
1. 确认方舟模型 API Key 配置正确
2. 检查接入点 ID 是否有效
3. 确认模型配额是否用尽
4. 登录方舟平台检查 API Key 权限

## 权限问题

### 问题：AK/SK 认证失败

**现象**：提示 `InvalidAccessKeyId` 或 `SignatureDoesNotMatch`。

**解决方案**：
1. 确认 AK/SK 正确且有效
2. 检查是否有 AgentKit 服务的访问权限
3. 确认 AK/SK 没有被禁用或过期
4. 联系管理员分配相关权限

### 问题：资源访问被拒绝

**现象**：提示 `AccessDenied` 或权限不足。

**解决方案**：
1. 确认账号有相应资源的操作权限
2. 检查 IAM 角色配置
3. 联系管理员授予必要权限

## 获取帮助

如果以上方案无法解决您的问题，请：

1. **查看日志**：
   - 本地日志：检查命令行输出
   - Platform 日志：访问 AgentKit 控制台查看详细日志

2. **联系支持**：
   - 提供详细的错误信息和日志
   - 说明复现步骤
   - 附上相关配置文件（注意脱敏）

3. **查阅文档**：
   - [SDK 文档](../3.agentkit-sdk/1.overview.md)
   - [API 文档](#)
   - 火山引擎官方文档
